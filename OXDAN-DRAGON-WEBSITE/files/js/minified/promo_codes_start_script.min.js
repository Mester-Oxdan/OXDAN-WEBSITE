document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("submit"),o=document.getElementById("command"),t=document.getElementById("output"),r=new Audio("files/resources/musics/freddy_nouse.mp3"),n=new Audio("files/resources/musics/fnaf_beatbox_1.mp3"),s=new Audio("files/resources/musics/asriel.mp3"),i=new Audio("files/resources/musics/undertale.mp3");function a(e){const o=document.createElement("style");o.innerHTML=e,document.head.appendChild(o)}e.addEventListener("click",(async function(){[i,r,n,s].forEach((e=>{e.pause(),e.currentTime=0}));const e=o.value.trim();if(e){try{const o=await fetch("files/php/promo_codes.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({promo:e,csrf_token:window.CSRF_TOKEN})}),d=await o.json();t.innerHTML="","success"===d.status?d.message.includes("http")?window.open(d.message,"_self"):(a(".promo_text_good{ position: absolute; left: 25%; top: 54%; font-weight: bolder; font-size: 35px; color: yellow; text-align: center; }"),t.innerHTML=`<p class='promo_text_good'>${d.message}</p>`,d.promo.includes("toby")?i.play():d.promo.includes("scott")&&(r.play(),n.play())):"error"===d.status&&(d.message.startsWith("Too many attempts")?Alert.error("Error! Too Many Attempts. Wait before trying again.","Blocked",{displayDuration:4e3}):"Invalid request method."===d.message?Alert.error("Error! PHP Request Failed.","Error",{displayDuration:4e3}):"Invalid promo code."===d.message?(s.play(),a(".promo_text_bad_1{ position: absolute; left: 44%; top: 54%; font-weight: bolder; font-size: 35px; color: red; }"),t.innerHTML=`<p class='promo_text_bad_1'>'${e}' is a wrong promo-code.</p>`):"Error opening file."===d.message?Alert.error("Error! Connecting To Database.","Error",{displayDuration:4e3}):Alert.error("Error! Something Went Wrong: "+d.message,"Error",{displayDuration:4e3}))}catch(e){Alert.error("Error! Something Went Wrong. Error Message: "+e,"Error",{displayDuration:4e3})}o.value=""}})),document.addEventListener("keyup",(function(o){"Enter"===o.code&&e.click()}))}));