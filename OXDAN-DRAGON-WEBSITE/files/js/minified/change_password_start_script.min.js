function change_password(e){e.preventDefault();var r=document.getElementById("current_password"),s=document.getElementById("password"),o=r.value,t=s.value,n=grecaptcha.getResponse(widgetId1),a={password:o,newpassword:t,deviceInfo:{userAgent:navigator.userAgent,screenResolution:window.screen.width+"x"+window.screen.height},csrf_token:window.CSRF_TOKEN,recaptcha_response:n};null===n||""===n?Alert.error("Error! Please Confirm You Are Not A Robot.","Error",{displayDuration:4e3}):fetch("/api/change_password.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((e=>e.json())).then((e=>{const r=document.getElementById("response");if(r.innerHTML="","success"===e.status){var s=document.createElement("h2"),o=document.createElement("h2"),t=new Audio("../files/resources/musics/undertale.mp3");function n(e){window.location.href={skip_login:"/skip_login"}[e]}Alert.success("Success! Password Changed successfully.","Success",{displayDuration:4e3}),s.textContent="!Password Changed Successfully!",o.textContent="Press any key to continue",r.appendChild(s),r.appendChild(o),t.play(),document.addEventListener("keydown",(function(e){n("skip_login")})),document.addEventListener("mousedown",(function(e){n("skip_login")}))}else"error"===e.status&&("Current password is incorrect."===e.message?Alert.error("Error! Current Password Is Incorrect.","Error",{displayDuration:4e3}):"User not found."===e.message?Alert.error("Error! User Not Found.","Error",{displayDuration:4e3}):"User account has invalid password data."===e.message?Alert.error("Error! Account Has Invalid Password Data.","Error",{displayDuration:4e3}):"All fields are required."===e.message?Alert.error("Error! All Fields Are Required.","Error",{displayDuration:4e3}):"No data received"===e.message?Alert.error("Error! No Data Received By Server.","Error",{displayDuration:4e3}):"Same password."===e.message?Alert.error("Error! You Enter The Same Password.","Error",{displayDuration:4e3}):"Invalid request method."===e.message?Alert.error("Error! PHP Request Failed.","Error",{displayDuration:4e3}):Alert.error("Error! "+e.message,"Error",{displayDuration:4e3}))})).catch((e=>{Alert.error("Error! Something Went Wrong. Error Message: "+e,"Error",{displayDuration:4e3})}))}
