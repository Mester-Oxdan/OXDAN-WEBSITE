document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("#formContainer form").querySelector("button"),r=document.querySelector(".text"),t=document.querySelector(".star-widget"),o=document.querySelector(".textarea textarea");r.style.display="none",e.addEventListener("click",(function(a){a.preventDefault(),function(){if(window.isSubmittingRating)return;window.isSubmittingRating=!0;const a=document.querySelector('.star-widget input[type="radio"]:checked'),i=o.value.trim();if(!a)return Alert.error("Error! You Forgot To Rate Us.","Error",{displayDuration:4e3}),void(window.isSubmittingRating=!1);if(""===i)return Alert.error("Error! You Forgot Describe Your Experience.","Error",{displayDuration:4e3}),void(window.isSubmittingRating=!1);const n=a.value,s=new FormData;s.append("rate",n),s.append("feedback",i),fetch("files/php/submit_rating.php",{method:"POST",body:s}).then((e=>e.json())).then((a=>{if("success"===a.status)Alert.success("Success! Thank You For Your Feedback ❤️","Success",{displayDuration:4e3}),t.style.display="none",o.style.display="none",e.style.display="none",r.style.display="block";else if("error"===a.status)switch(window.isSubmittingRating=!1,a.message){case"Rating is required.":Alert.error("Error! Rating Is Required.","Error",{displayDuration:4e3});break;case"Invalid request method.":Alert.error("Error! PHP Request Failed.","Error",{displayDuration:4e3});break;case"You have reached the limit of feedback submissions.":Alert.error("Error! You Have Reached The Maximum Rating Limit.","Error",{displayDuration:4e3});break;case"Too many feedbacks for feedback_1":Alert.error("Error! Too Many Feedbacks. Wait 1 minute before trying again.","Error",{displayDuration:4e3});break;case"Too many feedbacks for feedback_2":Alert.error("Error! Too Many Feedbacks. Wait 5 minutes before trying again.","Error",{displayDuration:4e3});break;case"Too many feedbacks for feedback_3":Alert.error("Error! Too Many Feedbacks. Wait 30 minutes before trying again.","Error",{displayDuration:4e3});break;case"Too many feedbacks for feedback_4":Alert.error("Error! Too Many Feedbacks. Wait 1 hour before trying again.","Error",{displayDuration:4e3});break;default:Alert.error("Error! Something Went Wrong: "+a.message,"Error",{displayDuration:4e3})}})).catch((e=>{window.isSubmittingRating=!1,Alert.error("Error! Something Went Wrong. Error Message: "+e,"Error",{displayDuration:4e3})}))}()})),document.getElementById("halfBox").addEventListener("click",(function(){const e=document.getElementById("formContainer");e.style.display="block"===e.style.display?"none":"block"}))}));